<!DOCTYPE html>
<html>
  <head>
    <style>
      #map {
        height: 400px;
        width: 100%;
       }
    </style>
  </head>



<body>
    <h3>My Google Maps Demo</h3>
    <div id="map"></div>


    <h3>My Google Maps Demo</h3>
    <div id="map"></div>
    <script>
    function initMap() {
    var mongo = require('mongodb');
   var assert = require('assert');
   var MongoClient = mongo.MongoClient;
var n1;
   var url = 'mongodb://localhost:27017/database1';

   MongoClient.connect(url, (err, db) => {

       assert.equal(null, err);


   var num=db.collection('movies').distinct("lat");
    console.log(`${num}`);
       db.collection('movies').distinct("lat").then((n) => {
      //   alert("yo baby!!!")
         //console.log(`${n}`);

         //db.close();

     db.collection('movies').distinct("lon").then((m) => {
      // console.log(`${m}`);


        var uluru = {lat:Number(n), lng: Number(m)};
        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 4,
          center: uluru
        });
        var image = 'https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png';

        var marker = new google.maps.Marker({
          position: {lat:Number(n), lng: Number(m)},
          map: map,
          icon: image
        });


        });
        });

      });
    }
    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key= AIzaSyBx3CowVS0ans1b7fE6JDV_tvyXB-ZgUBo &callback=initMap">
    </script>
  </body>
</html>
